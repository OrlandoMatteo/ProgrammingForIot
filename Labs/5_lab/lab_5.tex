% Created 2021-11-18 gio 15:28
% Intended LaTeX compiler: xelatex
\documentclass[a4paper]{article}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\usepackage{minted}
\usepackage{fontspec}
\setmainfont{Cabin}
\usepackage[margin=1.25in]{geometry}
\usepackage{minted}
\author{Matteo Orlando}
\date{}
\title{Programming for Iot - Lab 5}
\hypersetup{
 pdfauthor={Matteo Orlando},
 pdftitle={Programming for Iot - Lab 5},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 27.1 (Org mode 9.6)}, 
 pdflang={English}}
\begin{document}

\maketitle


\section{Exercise 1}
\label{sec:org5609e63}
Develop a RESTful style Catalog of a distributed platform for general purpose services. Identify the most suitable HTTP methods (among GET, POST, PUT and DELETE) and develop the web services to:

\begin{enumerate}
\item Retrieve information about IP address and port of the message broker
in the platform

\item Add a new device with the following information

\begin{itemize}
\item unique deviceID

\item end-points (i.e. Rest Web Services and/or MQTT topics)

\item available resources (e.g. Temperature, Humidity and Motion sensor)

\item “insert-timestamp” when this device was added
\end{itemize}
\end{enumerate}

\begin{quote}
(\textbf{SUGGESTION:} to avoid synchronization issues, this attribute is
managed and updated only by the Catalog according to its system clock)
\end{quote}

\begin{enumerate}
\item Update the information of a device

\item Retrieve all the registered devices

\item Retrieve a specific device with a deviceID

\item Register a new user with the following information

\begin{itemize}
\item unique userID

\item name

\item surname

\item email address(es)
\end{itemize}

\item Retrieve all the registered users

\item Retrieve a specific user with a certain userID
\end{enumerate}

\begin{quote}
\textbf{This information is stored in a JSON file and all the information
among the actors in the platform must be exchanged in JSON}

Implement an additional feature of the Catalog to remove all the
devices with “insert-timestamp” higher than two minutes. The Catalog
has to take this action periodically (for example every 1 minute).
\end{quote}

\section{Exercise 2}
\label{sec:org4103cd5}
Modify one of the sensor developed in the previous lab (lab 4 exercises 1 and 2)
in order to be able to to invoke the RESTful Catalog developed
in Exercise 1 to periodically (for example every 1 minute) :
\begin{itemize}
\item either registers as new devices or
\item refresh the old registration by updating theirs “insert-timestamp”.
\end{itemize}

During the refresh of an old device registration,the Catalog has to update also
the “insert-timestamp”.

\section{Exercise 3}
\label{sec:org1ab8ae8}
Develop a control application to monitor if the temperature values, coming from
a sensor like the one used in the exercise before, is above or below a given
threshold. In case the monitored value is outside the given threshold the
application needs to perform one or more of the following actions:
\begin{itemize}
\item store the event details in a local file that is accessible through an HTTP GET
request
\item send and HTTP POST request with the event's details to some kind of service (you can fake the actual
request but the general structure should make this possible with small future
updates)
\item send and MQTT message with the details of the event
\end{itemize}

When this application starts, it \textbf{\textbf{MUST}} connect to the catalog in order to
obtain the information needed to retrieve the mesurements from the sensor (IP
address or MQTT topic) and periodically contact the catalog to update the registration

\section{Exercise 4}
\label{sec:orgc06026f}
\color{purple}
\emph{
This exercise could be quite useful for your final
project, feel free to customize it according to the purpose of our project.
The general challeges that needs to be assessed are:
\begin{itemize}
\item having multiple user for your project
\item having multiple sensor for each user
\item each user must be able to see his own information
\end{itemize}
}
\color{black}


Using the application developed in all the exercise before try to deploy a simple simulation like the one described below

\begin{quote}
You have developed a system that allows your clients to monitor the temperature in their houses and to switch on and off the light. In your system there are 2 houses with one user each. Each one of this houses has a led and a temperature sensor. In your system there is also a controll application to logs for each user the temperature values outside a common threshold. Each user must be able to obtain his own log of the temperatures and must be able to see and set the status of his light.
\end{quote}

\subsection{Bonus improvements}
\label{sec:org528677e}
\begin{itemize}
\item each user has it's own custom treshold for the temperatures
\item each user has more than one temperature sensor and light
\end{itemize}
\end{document}
